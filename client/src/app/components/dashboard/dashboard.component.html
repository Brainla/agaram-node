<app-side-bar>
  <div *ngIf="loading" class="d-flex h-100 align-items-center justify-content-center">
    <mat-spinner [diameter]="30"></mat-spinner>
  </div>
  <div class="row" *ngIf="!loading">
    <h2>Dashboard <button class="float-end" (click)="exportDashboard()" mat-icon-button color="primary"><mat-icon>download</mat-icon></button></h2>
    <hr />
    <div class="d-flex justify-content-end my-3">

      <mat-form-field appearance="outline">
        <mat-label>Client</mat-label>
        <input
          matInput
          placeholder="Client"
          name="client"
          type="text"
          [(ngModel)]="client"
          #pageTemp="ngModel"
        />
      </mat-form-field>


      <mat-form-field appearance="outline">
        <mat-label>Status</mat-label>
        <mat-select [(ngModel)]="status" name="food">
          <mat-option *ngFor="let option of statusOptions" [value]="option">
            {{option}}
          </mat-option>
        </mat-select>
      </mat-form-field>   

      <mat-form-field appearance="outline" class="mx-2">
        <mat-label>Start Date</mat-label>
        <input matInput [(ngModel)]="startDate" [matDatepicker]="spicker">
        <mat-hint>MM/DD/YYYY</mat-hint>
        <mat-datepicker-toggle matSuffix [for]="spicker"></mat-datepicker-toggle>
        <mat-datepicker #spicker></mat-datepicker>
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>End Date</mat-label>
        <input matInput [(ngModel)]="endDate" [matDatepicker]="epicker">
        <mat-hint>MM/DD/YYYY</mat-hint>
        <mat-datepicker-toggle matSuffix [for]="epicker"></mat-datepicker-toggle>
        <mat-datepicker #epicker></mat-datepicker>
      </mat-form-field>
      <button mat-icon-button class="mt-2" (click)="searchArticle()">
        <mat-icon>search</mat-icon>
      </button>
    </div>
    <div class="table-responsive">
      <table class="table table-striped table-bordered">
        <thead class="thead-light">
          <tr>
            <th>
              <button mat-icon-button color="primary" (click)="openCreateArticle()">
                <mat-icon>add</mat-icon>
              </button>
            </th>
            <th scope="col" *ngFor="let column of displayedColumns">
              {{ column }}
            </th>
            
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let data of dataSource; let i = index">
            <td>
              <div class="d-flex">
                <button mat-icon-button color="primary" matTooltip="edit" (click)="openUpdateArticle(data)">
                  <mat-icon>edit</mat-icon>
                </button>
                <button mat-icon-button color="accent" matTooltip="delete" (click)="openDeleteArticle(data)">
                  <mat-icon>delete</mat-icon>
                </button>
              </div>
            </td>
            <th scope="row">{{ i + 1 }}</th>
            <td>{{ data.client }}</td>
            <td>{{ data.batch }}</td>
            <!-- <td>{{ data.articleTypes }}</td> -->
            <td>{{ data.article }}</td>
            <td>{{ data.pages }}</td>
            <td>{{ data.inputType }}</td>
            <td>{{ data.complexity }}</td>
            <td>{{ data.processType }}</td>
            <td>{{ data.mathCount }}</td>
            <td>{{ data.imagesCount }}</td>
            <td>{{ data.assignedTo?.username }}</td>
            <td>{{ data.status }}</td>
            <td>{{ data.createdAt| date }}</td>
            <td>{{ data.updatedAt| date }}</td>
            <td>{{ data.closedDate| date }}</td>
            <td>{{ data.completedDate| date }}</td>            
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</app-side-bar>
